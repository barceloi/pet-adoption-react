import{a as t,L as y,j as r,r as m,A as N}from"./index.f24f19d8.js";import{u as f}from"./useQuery.esm.fd9bfaeb.js";const w=async({queryKey:n})=>{const e=n[1];if(!e)return[];const o=await fetch(`https://pets-v2.dev-apis.com/breeds?animal=${e}`);if(!o.ok)throw new Error(`breeds/${e} fetch not ok`);return o.json()};function $(n){var o,s;const e=f(["breeds",n],w);return[(s=(o=e==null?void 0:e.data)==null?void 0:o.breeds)!=null?s:[],e.status]}async function j({queryKey:n}){const{animal:e,location:o,breed:s}=n[1],i=await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&location=${o}&breed=${s}`);if(!i.ok)throw new Error(`pet search not okay ${e}, ${o}, ${s}`);return i.json()}const L=({name:n,animal:e,breed:o,images:s,location:i,id:c})=>{let l="http://pets-images.dev-apis.com/pets/none.jpg";return s.length&&(l=s[0]),t(y,{to:`details/${c}`,className:"col-span-1 flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow",children:r("div",{className:"flex flex-1 flex-col p-8",children:[t("img",{src:l,alt:n,className:"mx-auto h-32 w-32 flex-shrink-0 rounded-full"}),r("div",{className:"mt-6 text-sm font-medium text-gray-900",children:[t("h2",{children:n}),r("h3",{children:[e," - ",o," - ",i]})]})]})})},S=({pets:n})=>t("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:n.length?n.map(e=>t(L,{animal:e.animal,id:e.id,name:e.name,breed:e.breed,images:e.images,location:`${e.city}, ${e.state}`},e.id)):t("h1",{children:"No se encontraron mascotas"})}),k=["bird","cat","dog","rabbit","reptile"],B=()=>{var h,u;const[n,e]=m.exports.useState({location:"",animal:"",breed:""}),[o,s]=m.exports.useState(""),[i]=$(o),[c]=m.exports.useContext(N),l=f(["search",n],j),x=(u=(h=l==null?void 0:l.data)==null?void 0:h.pets)!=null?u:[];return r("div",{className:"my-0 mx-auto w-11/12",children:[r("form",{className:"mb-10 flex flex-col items-center justify-center rounded-lg bg-gray-200 p-10 shadow-lg",onSubmit:a=>{var p,g,b;a.preventDefault();const d=new FormData(a.target),v={animal:(p=d.get("animal"))!=null?p:"",breed:(g=d.get("breed"))!=null?g:"",location:(b=d.get("location"))!=null?b:""};e(v)},children:[c?t("div",{className:"pet image-container",children:t("img",{src:c.images[0],alt:c.name})}):null,r("label",{htmlFor:"location",children:["Location",t("input",{type:"text",name:"location",className:"search-input",id:"location",placeholder:"Location"})]}),r("label",{htmlFor:"animal",children:["Animal",r("select",{id:"animal",className:"search-input",value:o,onChange:a=>{s(a.target.value)},onBlur:a=>{s(a.target.value)},children:[t("option",{}),k.map(a=>t("option",{value:a,children:a},a))]})]}),r("label",{htmlFor:"breed",children:["Breed",r("select",{className:"search-input greyed-out-disabled",disabled:!i.length,name:"breed",id:"breed",children:[t("option",{}),i.map(a=>t("option",{value:a,children:a},a))]})]}),t("button",{className:"rounded border-none bg-orange-500 px-6 py-2 text-white hover:opacity-50",children:"Submit"})]}),t(S,{pets:x})]})};export{B as default};
